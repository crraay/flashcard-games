<div class="quiz-game-container">
  <button class="back-button" (click)="goBack()" type="button">
    ‚Üê Back
  </button>

  <div *ngIf="selectedSet && !quizComplete" class="quiz-header">
    <h2 class="game-title">{{ selectedSet.name }}</h2>
    <div class="quiz-stats">
      <span class="stat">Question {{ currentQuestionIndex + 1 }}/{{ questions.length }}</span>
      <span class="stat">Score: {{ score }}/{{ questions.length }}</span>
    </div>
  </div>

  <fg-game-completion
    *ngIf="quizComplete"
    title="üéâ Quiz Complete! üéâ"
    [message]="getCompletionMessage()"
    (restart)="restartQuiz()">
  </fg-game-completion>

  <div *ngIf="selectedSet && !quizComplete && getCurrentQuestion()" class="quiz-content">
    <div class="question-image">
      <img [src]="getCurrentQuestion()!.flashcard.imageUrl" [alt]="getCurrentQuestion()!.flashcard.caption" />
    </div>

    <div class="question-text">
      <h3>What is this?</h3>
    </div>

    <div class="options-grid">
      <button
        *ngFor="let option of getCurrentQuestion()!.options"
        class="option-button"
        [class.selected]="selectedAnswer === option.caption"
        [class.correct]="showResult && option.isCorrect"
        [class.incorrect]="showResult && selectedAnswer === option.caption && !option.isCorrect"
        [class.disabled]="showResult"
        (click)="selectAnswer(option)"
        type="button">
        {{ option.caption }}
        <span *ngIf="showResult && option.isCorrect" class="result-icon">‚úì</span>
        <span *ngIf="showResult && selectedAnswer === option.caption && !option.isCorrect" class="result-icon">‚úó</span>
      </button>
    </div>

    <div *ngIf="showResult" class="result-message">
      <div [class]="'message ' + (isCorrect ? 'correct' : 'incorrect')">
        <p *ngIf="isCorrect">üéâ Correct!</p>
        <p *ngIf="!isCorrect">‚ùå Wrong. The correct answer is: {{ getCurrentQuestion()!.flashcard.caption }}</p>
      </div>
      <button class="next-button" (click)="nextQuestion()" type="button">
        {{ currentQuestionIndex + 1 < questions.length ? 'Next Question' : 'Finish Quiz' }}
      </button>
    </div>
  </div>
</div>
